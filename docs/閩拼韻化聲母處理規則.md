# 閩拼韻化聲母處理規則

## 概述

在閩拼（BP）拼音系統中，羅馬字母 `m` 和 `ng` 具有雙重身份：

1. **聲母**：當後面接韻母時
2. **韻化聲母（韻化輔音）**：當後面直接接聲調時

## 轉換規則

### 1. 作為聲母時（需要轉換）

當 `m` 或 `ng` 後面接韻母時，按照正常聲母轉換規則：

| TLPA | BP | 範例 | 說明 |
|------|----|----- |------|
| `m` → | `bbn` | 米 `mi2` → `bbni3` | 正常聲母轉換 |
| `ng` → | `ggn` | 吳 `ngoo5` → `ggnoo2` | 正常聲母轉換 |

**更多範例**：
- 名 `mia2` → `bbnia3`
- 明 `bing2` → `bbnia3`
- 雅 `nga2` → `ggna3`

### 2. 作為韻化聲母時（保持原樣）

當 `m` 或 `ng` 後面直接接聲調時，**不進行聲母轉換**，保持 `m` 和 `ng` 不變：

| TLPA | BP | 範例 | 說明 |
|------|----|----- |------|
| `m7` → | `m6` | 毋 `m7` → `m6` | 韻化聲母，僅轉換聲調 |
| `ng5` → | `ng2` | 黃 `ng5` → `ng2` | 韻化聲母，僅轉換聲調 |

## 判斷邏輯

在 `convert_TLPA_to_BP()` 函數中：

```python
# 檢查是否為韻化聲母：整個無調號標音就是 m 或 ng
if mo_tiau_piau_im == "m":
    # 韻化聲母 m：毋 [m7] 保持為 m，不轉換成 bbn
    siann = ""
    un = "m"
elif mo_tiau_piau_im == "ng":
    # 韻化聲母 ng：黃 [ng5] 保持為 ng，不轉換成 ggn
    siann = ""
    un = "ng"
else:
    # 正常聲母轉換邏輯
    for key in sorted(SIANN_BU_TNG_UANN_PIAU.keys(), key=lambda x: -len(x)):
        if mo_tiau_piau_im.startswith(key):
            siann = SIANN_BU_TNG_UANN_PIAU[key]
            un = mo_tiau_piau_im[len(key) :]
            break
```

## 聲調轉換

韻化聲母的聲調仍然按照正常的 TLPA → BP 聲調對應表轉換：

| TLPA 調 | 調名 | BP 調 |
|---------|------|-------|
| 5 | 陽平 | 2 |
| 7 | 陽去 | 6 |

因此：
- 黃 `ng5`（TLPA 陽平）→ `ng2`（BP 陽平）
- 毋 `m7`（TLPA 陽去）→ `m6`（BP 陽去）

## 實際應用

這個特性在字典轉換時確保了：

1. **正確性**：韻化聲母不會被錯誤轉換
2. **一致性**：維持閩拼系統的音韻規則
3. **相容性**：與其他台語拼音系統的轉換保持準確

## 測試驗證

程式中包含完整的測試案例，驗證：
- ✅ 韻化聲母正確保持（`m7` → `m6`, `ng5` → `ng2`）
- ✅ 正常聲母正確轉換（`mi2` → `bbni3`, `ngoo5` → `ggnoo2`）
- ✅ 零聲母功能不受影響
- ✅ 其他聲母轉換功能正常