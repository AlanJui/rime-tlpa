# zu_im_2_libs： 注音輸入法模組程式館
# version: "v0.1.0.0"

zu_im_hu_ho_pinn_be:
  __append:
    #==============================================================================
    # phing_im_tng_ji_be:
    # 定義【注音符號編碼】
    #==============================================================================
    # 去除零聲母
    # - derive/Ø//
    # --------------------------------------------------------------------------
    # 變調
    # --------------------------------------------------------------------------
    # 舒聲變調 (17325)
    - derive/1/7/ # 第一調 → 第七調
    - derive/7/3/ # 第七調 → 第三調
    - derive/3/2/ # 第三調 → 第二調
    - derive/2/1/ # 第二調 → 第一調
    - derive/5/7/ # 第五調 → 第七調
    # 入聲變調（4 8）
    - derive/(?<![bdgh])4/8/ # -ㆷ 第四調 → 第八調
    - derive/(?<![bdgh])8/4/ # -ㆷ 第八調 → 第四調
    # --------------------------------------------------------------------------
    # 韻母編碼
    # --------------------------------------------------------------------------
    - xform/oonn/Q/ # ㆧ[ oonn ]
    - xform/ainn/X/ # ㆮ[ ainn ]
    - xform/aunn/Y/ # ㆯ[ aunn ]
    - xform/inn/I/ # ㆪ[ inn ]
    - xform/unn/U/ # ㆫ[ unn ]
    - xform/ann/A/ # ㆩ[ ann ]
    - xform/enn/E/ # ㆥ[ enn ]
    - xform/ang/G/ # ㄤ[ ang ]
    - xform/ong/H/ # ㆲ[ ong ]
    - xform/oo/O/ # ㆦ[ oo ]
    - xform/or/o/ # ㄜ[ or ]
    - xform/ai/x/ # ㄞ[ ai ]
    - xform/au/y/ # ㄠ[ au ]
    - xform/an/@/ # ㄢ[ an ]
    - xform/en/N/ # ㄣ[ en ]
    - xform/ir/R/ # ㆨ[ ir ]
    - xform/am/[/ # ㆰ[ am ]
    - xform/om/]/ # ㆱ[ om ]
    - xform/ng/w/ # ㄫ[ ng ]
    - xform/ng/W/ # ㆭ[ ng ]
    - xform/i/i/ # ㄧ[ i ]
    - xform/u/u/ # ㄨ[ u ]
    - xform/a/a/ # ㄚ[ a ]
    - xform/e/e/ # ㆤ[ e ]
    # --------------------------------------------------------------------------
    # 鼻音韻母格式一 ：
    # ann = aⁿ = ㆩ； uann = uaⁿ = ㄨㆩ ； iann = iaⁿ = ㄧㆩ
    # --------------------------------------------------------------------------
    # 設定鼻音韻母代表拼音字母
    - derive/ⁿ([aiueOyx])/B$1/ # 鼻音韻母以【拼音字母編碼】以 B 代表
    # -------------------------------------------------------------------------
    # 鼻音韻尾（m/ng/n）拼音字母編碼
    #--------------------------------------------------------------------------
    # ng ：預設當【韻母ㆭ】
    - xform/ng(?=\d)/W/ # ㆭ (W) = -ng：ng 後接調號，當【韻尾韻母】ㆭ = ㄥ
    # n ：預設當【聲母ㄋ】)
    - xform/n(?=\d)/N/ # ㄣ (N) = -n： n  後接調號，當【韻尾韻母】ㄣ，
    # m ：預設當【聲母ㄇ】
    - xform/m(?=\d)/M/ # ㆬ (M) = -m： m  後接調號，當【韻尾韻母】ㆬ = ㄇ
    # -------------------------------------------------------------------------
    # 校調 oo 韻母：oo 簡化成 o，如：ong/ok, om/op, onn, oonn
    # --------------------------------------------------------------------------
    # 以下韻母，拼音字母 o ，實為 oo 之縮寫，國際音標為：[ɔ]
    - xform/io(?=[Wk])/iO/ # iong = iOng / iok = iOk
    - xform/o(?=[Wk])/O/ # ong = Ong / ok = Ok
    - xform/o(?=[Mp])/O/ # om = OM / op = Op
    # --------------------------------------------------------------------------
    # 鼻音韻尾編碼
    - derive/OW/H/ # ong = o + ng = O + W = ㆦ + ㆭ = ㆲ
    - derive/OM/D/ # om  = OM = ㆱ
    - derive/aW/G/ # ang = aW = G = ㄤ
    - derive/aN/@/ # an  = aN = @ = ㄢ
    - derive/aM/V/ # am = a + m = a + M = ㄚ + ㆬ = ㆰ
    # --------------------------------------------------------------------------
    # 泉州腔韻母
    - xform/ir/R/ # ㆨ = ir
    #--------------------------------------------------------------------------
    # 地方腔韻母
    #--------------------------------------------------------------------------
    # - derive/er(W|k)/i$1/ # erng/erk
    # - derive/er(N|t)/u$1/ # ern/ert
    # - derive/ere/ue/
    # - derive/er/e/
    # - derive/ee/e/ # 漳州/泉州腔
    # - derive/ei/e/ # 漳州腔
    # - derive/ou/O/ # ou = oo = O
    # - derive/ur/u/ # 廈門腔

    # --------------------------------------------------------------------------
    # 声母編碼
    #  - 雙唇音: b, p, bb, m
    #  - 舌尖中音（齒齦音）: d, t, n, l
    #  - 舌根音（軟顎音）: g, k, gg, ng
    #  - 舌尖前音（齒齦音）: z, c, j, s
    #  - 喉音（聲門音）：h
    # --------------------------------------------------------------------------
    # ng 可為聲母，亦可為韻母
    # - xform/^ng(\D)/w/    # ㄫ (w) = ng ：ng 後面不接【數值】（即【調號】）
    - xform/^ng(?!\d)/w/ # ㄫ (w) = ng ：ng 後面不接【數值】（即【調號】）
    #--------------------------------------------------------------------------
    - xform/^b/b/ # ㄅ[ b ]
    - xform/^p/p/ # ㄆ[ p ]
    - xform/^bb/B/ # ㆠ[ bb ]
    - xform/^m/m/ # ㄇ[ m ]
    #--------------------------------------------------------------------------
    - xform/^d/d/ # ㄉ[ d ]
    - xform/^t/t/ # ㄊ[ t ]
    - xform/^n/n/ # ㄋ[ n ]
    - xform/^l/l/ # ㄌ[ l ]
    #--------------------------------------------------------------------------
    - xform/^g/g/ # ㄍ[ g ]
    - xform/^k/k/ # ㄎ[ k ]
    - xform/^gg/G/ # ㆣ[ gg ]
    - xform/^h/h/ # ㄏ[ h ]
    #--------------------------------------------------------------------------
    # 舌尖前音（齒齦音）: z[c], c[ch], j[j], s[s]
    # - xform/z(?=i)/Z/    # ㄗ --> ㄐ
    # - xform/c(?=i)/C/    # ㄘ --> ㄑ
    # - xform/j(?=i)/J/    # ㆡ --> ㆢ
    # - xform/s(?=i)/S/    # ㄙ --> ㄒ
    - xform/^jji/Zi/ # ㆢ[ jji ]
    - xform/^ji/zi/ # ㄐ[ ji ]
    - xform/^ci/ci/ # ㄑ[ ci ]
    - xform/^si/si/ # ㄒ[ si ]

    - xform/^zz/Z/ # ㆡ[ zz ]
    - xform/^z/z/ # ㄗ[ z ]
    - xform/^c/c/ # ㄘ[ c ]
    - xform/^s/s/ # ㄙ[ s ]
    #--------------------------------------------------------------------------
    # 入聲韻尾轉換
    # (1) -m  ==> -p
    # (2) -n  ==> -t
    # (3) -ng ==> -k
    #
    # (1) ap, ip, iap,
    # (2) at, it, ut, iat, uat
    # (3) ak, ik, ok, iak, iok
    # (4) ah, ih, uh, eh, ooh, oh, aih, auh, iah, iuh, ioh, uah, uih, ueh, iauh, uaih
    #--------------------------------------------------------------------------
    # - derive/[48]/0/         # 設定【入聲】之【聲調】值，不論4或8，皆以0代
    - derive/b[48]/b0/
    - derive/d[48]/d0/
    - derive/g[48]/g0/
    - derive/h[48]/h0/
    #--------------------------------------------------------------------------
    # 設定讀取 ‘字典’ 漢字拼音的 ‘解析格式'
    #--------------------------------------------------------------------------
    - derive/^([A-Za-z]+)\d$/$1/
    #=======================================================================
    # abbreviation:
    # 台語音標之拼音字母輸入【簡化規則】（abbreviation：縮寫詞）
    #=======================================================================
    # 只輸入【聲母】搜尋漢字
    - abbrev/^([bpBmdtnlzcZsjJgkGhw]).+$/$1/
    # 輸入【聲母】與【調號】搜尋漢字
    - abbrev/^([bpBmdtnlzcZsjJgkGhw]).+(\d)$/$1/
    # 舒聲調（平、上、去聲）之漢字，可免調號（1/2/3/5/7）；但【入聲】（調號：4/8）不適用。
    - abbrev/^(\D+)([12357])$/$1/
    #==========================================================================
    # ji_be_tng_jih_kian:
    # 字典編碼轉換按鍵
    # 按下【鍵盤按鍵】後，RIME 輸出之【字碼】的對映關聯。
    #==========================================================================
    - xlit|bpBmdtnlgkGhzcZsjCJSiIuUaAOQoeExXyY@NGR[]HwWLMRFVD123570|1q!a2wsxedEcyhYnrfRvuUjJ8*iIk,<9(lL0p;-[]'z\/mbtgC 43657|

jih_kian_tng_uann:
  #==============================================================================
  # 定義【按鍵輸入轉換】
  #==============================================================================
  __append:
    #--------------------------------------------------------------------------
    # 定義【鍵盤按鍵】與【注音符號】對映關聯
    #--------------------------------------------------------------------------
    - xlit|1q!a2wsxedEcyhYnrfRvuUjJ8*iIk,<9(lL0p;-[]'z\/mbtgC 43657|ㄅㄆㆠㄇㄉㄊㄋㄌㄍㄎㆣㄏㄗㄘㆡㄙㄐㄑㆢㄒㄧㆪㄨㆫㄚㆩㆦㆧㄜㆤㆥㄞㆮㄠㆯㄢㄣㄤㆨㆰㆱㆲㄫㆭㄥㆬㆴㆵㆻㆷˉˋ˪ˊ˫˙|
    #--------------------------------------------------------------------------
    # 按鍵轉注音符號：定義鍵盤【按鍵】與【注音符號】的對映關聯
    # 操作輸入法時，在輸入介面壓下的【按鍵】，與之對映的注音符號（ㄅㄆㄇ），
    # 將根據此處的定義，於輸入介面顯示相對應的注音符號
    #--------------------------------------------------------------------------
    # - xform/ /ˉ/
    # - xform/'/ /
    #--------------------------------------------------------------------------
    # 聲母校調
    #--------------------------------------------------------------------------
    # 濁聲母轉換
    - xform/ㄗ(ㄧ|ㆪ)/ㄐ$1/
    - xform/ㄘ(ㄧ|ㆪ)/ㄑ$1/
    - xform/ㄙ(ㄧ|ㆪ)/ㄒ$1/
    - xform/ㆡ(ㄧ|ㆪ)/ㆢ$1/ # j
    #--------------------------------------------------------------------------
    # 鼻音韻母轉換
    #--------------------------------------------------------------------------
    # 介音 i 開頭之鼻韻母
    - xform/ㄬㄧㄠ/ㄧㆯ/ # Niau = iaunn
    - xform/ㄬㄧㄚ/ㄧㆩ/ # Nia = iann
    - xform/ㄬㄧㄛ/ㄧㆧ/ # NiO = iOnn
    - xform/ㄬㄧㄨ/ㄧㆫ/ # Niu = iunn
    # 介音 u 開頭之鼻韻母
    - xform/ㄬㄨㄞ/ㄨㆮ/ # Nuai = uainn
    - xform/ㄬㄨㄚ/ㄨㆩ/ # Nua = uann
    - xform/ㄬㄨㄧ/ㄨㆪ/ # Nui = uinn
    - xform/ㄬㄨㆤ/ㄨㆥ/ # Nue = uenn
    # 元音/複合鼻韻母
    - xform/ㄬㄧ/ㆪ/ # Ni = inn
    - xform/ㄬㄨ/ㆫ/ # Nu = unn
    - xform/ㄬㄚ/ㆩ/ # Na = ann
    - xform/ㄬㆦ/ㆧ/ # NO = Onn
    - xform/ㄬㆤ/ㆥ/ # Ne = enn
    - xform/ㄬㄞ/ㆮ/ # Nai = ainn
    - xform/ㄬㄠ/ㆯ/ # Nau = aunn
    #------------------------------------------------------
    # 韻母校調
    - xform/ㄚㄧ/ㄞ/ # ai
    - xform/ㄚㄨ/ㄠ/ # au
    - xform/ㄚㆭ/ㄤ/ # ang
    - xform/ㄚㄣ/ㄢ/ # an
    - xform/ㄚㆬ/ㆰ/ # am
    #
    # - xform/ㆦㆭ/ㆲ/ # ong
    # - xform/ㆦㆬ/ㆱ/ # om
    #
    - xform/ㄧㆭ/ㄧㄥ/ # ing
